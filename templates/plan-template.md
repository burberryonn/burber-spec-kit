# План реализации: [FEATURE]

**Ветка**: `[###-feature-name]` | **Дата**: [DATE] | **Спецификация**: [link]  
**Входные данные**: `/specs/[###-feature-name]/spec.md` (последняя утверждённая спецификация)  
**Исполнитель**: Roo Code. Перед началом работ освежите правила из `.specify/memory/constitution.md`.

---

## Резюме

[Кратко опишите целевую ценность и основные ограничения из спецификации и исследований. Укажите, что запускается через FSD + Vite + React + Tailwind + shadcn/ui.]

---

## Технический контекст

- **Бандлер и окружение**: Vite (React шаблон). Сверьте актуальные версии через context7 (`resolve-library-id` → `get-library-docs`).
- **UI-стек**: Tailwind CSS + shadcn/ui. Все компоненты — декларативные, без неподтверждённых библиотек.
- **Язык реализации**: JavaScript (ESNext). TypeScript подключаем **только** если в спецификации явно указано требование.
- **Архитектура**: Feature-Sliced Design (FSD). Обязательные уровни: `app`, `processes`, `pages`, `widgets`, `features`, `entities`, `shared`.
- **Состояние/данные**: [NEEDS CLARIFICATION, если хранение/бэкенд не описаны].
- **Соглашения по стилю**: Tailwind utility-first, компоненты shadcn/ui переопределяем через `shared/ui`.
- **Ограничения производительности**: [Указать SLA/метрики из спецификации или пометить NEEDS CLARIFICATION].
- **Цели доступности**: [WCAG/ARIA, если требуются].

---

## Проверка конституции

*Контрольные вопросы до исследования (Phase 0) и повторной проверки после Phase 1.*

- Соответствует ли Feature-Sliced Design?  
- Нет ли скрытых требований на TypeScript/серверные фреймворки?  
- Соблюдается правило «тесты только после завершения функционала»?  
- Все зависимости подтверждены и задокументированы через context7?

При нарушении правил фиксируйте пункт, ссылку на конституцию и план смягчения.

---

## Структура артефактов

### Документация (ветка feature)

```
specs/[###-feature-name]/
├── plan.md          # текущий план (этот документ)
├── research.md      # результаты Phase 0 (обязательно ссылаться на context7)
├── data-model.md    # модели, схемы, контракты данных
├── quickstart.md    # сценарии проверки и конфигурации окружения
├── contracts/       # OpenAPI/GraphQL или иные контракты
└── tasks.md         # чеклист реализации (генерируется на Phase 2)
```

### Исходный код (корень репозитория)

```
src/
├── app/             # инициализация приложения, маршрутизация, провайдеры
├── processes/       # долгоживущие процессы (auth, session и т.п.)
├── pages/           # страницы уровня маршрутов
├── widgets/         # композиция из нескольких features/entities
├── features/        # горизонт с публичным API для конкретной функции
├── entities/        # модели предметной области + их представления
└── shared/
    ├── lib/         # утилиты, helpers
    ├── api/         # клиент для запросов
    ├── config/      # константы, настройки
    └── ui/          # базовые компоненты (включая обёртки shadcn/ui)

public/              # статика Vite
styles/              # Tailwind конфигурация, postcss
```

**Решение по структуре**: [Подтвердите, какие подпапки создаются и какие отклонения от эталона требуются. Любое отклонение поясните ссылкой на спецификацию.]

---

## План работ по фазам

1. **Phase 0 — Research**  
   - Зафиксируйте нерешённые вопросы как `NEEDS CLARIFICATION`.  
   - Получите выдержки из context7 (Tailwind, Vite, React, shadcn/ui) и приложите ссылки/версии.  
   - Примите технические решения и зафиксируйте их в `research.md`.

2. **Phase 1 — Design**  
   - Обновите `data-model.md` с опорой на FSD (какие сущности → в какой слой).  
   - Подготовьте структуру директорий, алиасы, базовые конфиги `tailwind.config.js`, `postcss.config.js`, `vite.config.js`.  
   - Обновите `quickstart.md` с командами `npm install`, `npm run dev`, `npm run build`.  
   - Синхронизируйте контексты агентов через `scripts/.../update-agent-context`.

3. **Phase 2 — Tasks**  
   - Сгенерируйте `tasks.md`, гарантируя, что тестовые задачи располагаются в конце после фазы “feature complete”.  
   - Убедитесь, что каждая задача указывает точный путь (например, `src/features/cart/ui/AddButton.jsx`).

4. **Phase 3 — Implementation**  
   - Выполняйте задачи по приоритету user story.  
   - Тестовые задачи выполняйте **последними**, после реализации всех историй (ручные/авто).  
   - По завершении обновите `tasks.md`, `checklists/`, `quickstart.md`.

---

## Контроль сложности и рисков

| Риск/нарушение | Причина | План смягчения | Ссылка на конституцию |
|----------------|---------|----------------|------------------------|
| [Напр., добавляем новый процесс] | [Почему необходимо] | [Что делаем] | [Пункт/версия] |

---

## План тестирования (фаза финализации)

- **Автоматические тесты**: запускаются после завершения всех user story. Если TypeScript подключён, добавьте `tsc --noEmit` в финальную проверку.  
- **Визуальные проверки**: описать шаги ручного тестирования с использованием Vite dev server.  
- **Accessibility**: если требуется, укажите чеклист для проверки компонентов shadcn/ui.

---

## Источники и ссылки

- context7: [ID библиотеки Tailwind], [ID Vite], [ID React], [ID shadcn/ui]  
- Дополнительные материалы: [Список статей/гайдов]  
- Открытые вопросы: [Перечень вопросов, ожидающих уточнения пользователем]

