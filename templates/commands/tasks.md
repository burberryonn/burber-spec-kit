---
description: Сформировать tasks.md с зависимостями под архитектуру FSD + Vite + React + Tailwind + shadcn/ui.
scripts:
  sh: scripts/bash/check-prerequisites.sh --json
  ps: scripts/powershell/check-prerequisites.ps1 -Json
---

## Пользовательский ввод

```text
$ARGUMENTS
```

---

## Алгоритм

1. **Запусти `{SCRIPT}`** из корня репозитория. Извлеки `FEATURE_DIR`, `PLAN_PATH`, `SPEC_PATH`, список доступных документов. Если `plan.md` или `spec.md` отсутствуют — остановись и сообщи причину.

2. **Загрузить артефакты**:
   - `plan.md` — стек, структура FSD, фазы;
   - `spec.md` — пользовательские истории с приоритетами;
   - при наличии: `research.md`, `data-model.md`, `contracts/`, `quickstart.md`.

3. **Определить структуру FSD** по плану: какие слои (`app`, `processes`, `pages`, `widgets`, `features`, `entities`, `shared`) участвуют. Каждая задача должна указывать конкретный путь (например, `src/features/hero/ui/HeroSection.jsx`).

4. **Сгруппировать задачи по фазам**:
   - Фаза 1 — инициализация проекта (Vite, Tailwind, shadcn/ui).
   - Фаза 2 — общая инфраструктура, обязательная перед историями.
   - Фазы 3+ — по одной фазе на каждую пользовательскую историю (в порядке P1 → P2 → …).
   - Последняя фаза — “Завершение и тестирование” (тесты только здесь, после завершения всех историй).

5. **Правила составления задач**:
   - Нумерация `T001`, `T002`, …; обязательно `[Story]` (`US1`, `US2`, …).
   - `[P]` ставь только если задачи не конфликтуют по файлам.
   - Не добавляй тестовые задачи внутри фаз историй (только в финальной фазе).
   - Фиксируй зависимости (какие задачи блокируют другие).
   - Любые отклонения от FSD или стека помечай и поясняй.

6. **Сформировать tasks.md** по шаблону `templates/tasks-template.md`:
   - заполни все разделы: фазы, зависимость, стратегия поставки;
   - текст на русском языке;
   - путь к каждому файлу указывай абсолютный относительно корня репо.

7. **Проверить целостность**:
   - все пользовательские истории покрыты задачами;
   - есть явная финальная фаза с тестами и документацией;
   - `NEEDS CLARIFICATION` из плана/спека отражены в выводе (если остались).

8. **Отчёт**:
   - путь к `tasks.md`;
   - количество задач всего и по каждой истории;
   - наличие незакрытых вопросов;
   - напоминание, что тесты выполняются после завершения функционала.

---

## Нельзя

- Пропускать истории или объединять их в одну фазу.
- Добавлять TypeScript или сторонние инструменты, если этого нет в планах/спецификации.
- Изменять файлы кроме `tasks.md`.
