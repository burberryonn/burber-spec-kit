---
description: Создать или обновить спецификацию под стек FSD + Vite + React + TypeScript + Mantine.
scripts:
  sh: scripts/bash/create-new-feature.sh --json "{ARGS}"
  ps: scripts/powershell/create-new-feature.ps1 -Json "{ARGS}"
---

## Пользовательский ввод

```text
$ARGUMENTS
```

Если вход пустой — сообщи об ошибке и остановись.

---

## Алгоритм

1. **Запусти скрипт** `{SCRIPT}` из корня репозитория *один раз*. Разбери JSON и сохрани:
   - `BRANCH_NAME`
   - `SPEC_FILE`
   - абсолютный путь к каталогу фичи  
   Ошибка или пустые поля → остановись.

2. **Загрузить шаблон** `templates/spec-template.md` и следовать его структуре (всё на русском языке).

3. **Разобрать запрос пользователя**:
   - Выдели акторов, пользовательские цели, доменные сущности.
   - Учитывай новый стек: Vite + React + TypeScript (strict), Mantine 7+, Zustand (по умолчанию), react-router 6.30+, i18next.
   - Используй метки `[NEEDS CLARIFICATION: …]` только для критичных вопросов (максимум 3).

4. **Заполнить разделы**:
   - Пользовательские истории (P1, P2, …) + критерии приёмки.
   - Требования: функциональные, нефункциональные (перфоманс, a11y), архитектурные ограничения (FSD-слои, Mantine theme, отсутствие Tailwind).
   - FSD-карта: какие страницы, widgets, features, entities потребуются.
   - Критерии успеха: измеримые метрики (business & UX).
   - Ассумпции, ключевые сущности, открытые вопросы.

5. **Сформировать `spec.md`**:
   - Заполни все placeholders, сохрани порядок заголовков и комментарии из шаблона.
   - Текст — на русском, без готового кода.
   - Не меняй другие файлы.

6. **Создать чеклист качества** `FEATURE_DIR/checklists/requirements.md` по структуре `templates/checklist-template.md`, добавив пункты:
   - требования тестируемы и согласуются с FSD-структурой;
   - критерии успеха измеримы;
   - отражены ограничения по стеку (TypeScript strict, Mantine theme, отсутствие Tailwind);
   - все `[NEEDS CLARIFICATION]` перечислены.

7. **Проверить спецификацию**:
   - Отметь выполненные пункты `[x]`, проблемные — оставь `[ ]` и опиши, что нужно исправить.
   - Если остались незакрытые пункты, сообщи об этом пользователю.

8. **Отчёт**:
   - Укажи ветку и путь к `spec.md`.
   - Сколько пунктов чеклиста закрыто.
   - Какие вопросы/риски требуют ответа.

---

## Нельзя

- Генерировать HTML/CSS/JS или начинать архитектурные решения FSD на этом шаге.
- Игнорировать конституцию проекта или базовый стек (Vite + React + TS + Mantine).
- Менять файлы вне `spec.md` и чеклиста.
